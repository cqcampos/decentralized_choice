delta_j, delta_X, psi_D, c_X,  sd_eta,
sd_theta_1, sd_theta_2, sd_theta_3,
mu_theta_1, mu_theta_2, mu_theta_3,
p_type_1, p_type_2, p_type_3,
params, exog, use_torch_for_eq, use_mean_pi =use_mean_pi)
}
source(paste0(dir,"/code/helper/simulate_counterfactual.r"))
source(paste0(dir, "/code/helper/pi_norm_torch.R"))
source(paste0(dir, "/code/helper/calculate_eq.R"))
# 5.2 Repeat Monte Carlo draws
for (p_mod in c(3)){
run_sim_cf(dir, win_os, nsims, p_mod, endyear, low_score_school, mean_school_scores,
phbao, asian, white,
yearfe, blockfe, outcome_fes,
alpha_j_math, alpha_0_X_math, alpha_m_X_math, alpha_0_math, alpha_m_math,
alpha_j_ela, alpha_0_X_ela, alpha_m_X_ela, alpha_0_ela, alpha_m_ela,
delta_j, delta_X, psi_D, c_X,  sd_eta,
sd_theta_1, sd_theta_2, sd_theta_3,
mu_theta_1, mu_theta_2, mu_theta_3,
p_type_1, p_type_2, p_type_3,
params, exog, use_torch_for_eq, use_mean_pi =use_mean_pi)
}
sum(seats_eq$seats>0)
0
source(paste0(dir,"/code/helper/simulate_counterfactual.r"))
source(paste0(dir, "/code/helper/pi_norm_torch.R"))
source(paste0(dir, "/code/helper/calculate_eq.R"))
# 5.2 Repeat Monte Carlo draws
for (p_mod in c(3)){
run_sim_cf(dir, win_os, nsims, p_mod, endyear, low_score_school, mean_school_scores,
phbao, asian, white,
yearfe, blockfe, outcome_fes,
alpha_j_math, alpha_0_X_math, alpha_m_X_math, alpha_0_math, alpha_m_math,
alpha_j_ela, alpha_0_X_ela, alpha_m_X_ela, alpha_0_ela, alpha_m_ela,
delta_j, delta_X, psi_D, c_X,  sd_eta,
sd_theta_1, sd_theta_2, sd_theta_3,
mu_theta_1, mu_theta_2, mu_theta_3,
p_type_1, p_type_2, p_type_3,
params, exog, use_torch_for_eq, use_mean_pi =use_mean_pi)
}
source(paste0(dir,"/code/helper/simulate_counterfactual.r"))
source(paste0(dir, "/code/helper/pi_norm_torch.R"))
source(paste0(dir, "/code/helper/calculate_eq.R"))
# 5.2 Repeat Monte Carlo draws
for (p_mod in c(3)){
run_sim_cf(dir, win_os, nsims, p_mod, endyear, low_score_school, mean_school_scores,
phbao, asian, white,
yearfe, blockfe, outcome_fes,
alpha_j_math, alpha_0_X_math, alpha_m_X_math, alpha_0_math, alpha_m_math,
alpha_j_ela, alpha_0_X_ela, alpha_m_X_ela, alpha_0_ela, alpha_m_ela,
delta_j, delta_X, psi_D, c_X,  sd_eta,
sd_theta_1, sd_theta_2, sd_theta_3,
mu_theta_1, mu_theta_2, mu_theta_3,
p_type_1, p_type_2, p_type_3,
params, exog, use_torch_for_eq, use_mean_pi =use_mean_pi)
}
source(paste0(dir,"/code/helper/simulate_counterfactual.r"))
source(paste0(dir, "/code/helper/pi_norm_torch.R"))
source(paste0(dir, "/code/helper/calculate_eq.R"))
# 5.2 Repeat Monte Carlo draws
for (p_mod in c(3)){
run_sim_cf(dir, win_os, nsims, p_mod, endyear, low_score_school, mean_school_scores,
phbao, asian, white,
yearfe, blockfe, outcome_fes,
alpha_j_math, alpha_0_X_math, alpha_m_X_math, alpha_0_math, alpha_m_math,
alpha_j_ela, alpha_0_X_ela, alpha_m_X_ela, alpha_0_ela, alpha_m_ela,
delta_j, delta_X, psi_D, c_X,  sd_eta,
sd_theta_1, sd_theta_2, sd_theta_3,
mu_theta_1, mu_theta_2, mu_theta_3,
p_type_1, p_type_2, p_type_3,
params, exog, use_torch_for_eq, use_mean_pi =use_mean_pi)
}
source(paste0(dir,"/code/helper/simulate_counterfactual.r"))
source(paste0(dir, "/code/helper/pi_norm_torch.R"))
source(paste0(dir, "/code/helper/calculate_eq.R"))
# 5.2 Repeat Monte Carlo draws
for (p_mod in c(3)){
run_sim_cf(dir, win_os, nsims, p_mod, endyear, low_score_school, mean_school_scores,
phbao, asian, white,
yearfe, blockfe, outcome_fes,
alpha_j_math, alpha_0_X_math, alpha_m_X_math, alpha_0_math, alpha_m_math,
alpha_j_ela, alpha_0_X_ela, alpha_m_X_ela, alpha_0_ela, alpha_m_ela,
delta_j, delta_X, psi_D, c_X,  sd_eta,
sd_theta_1, sd_theta_2, sd_theta_3,
mu_theta_1, mu_theta_2, mu_theta_3,
p_type_1, p_type_2, p_type_3,
params, exog, use_torch_for_eq, use_mean_pi =use_mean_pi)
}
source(paste0(dir,"/code/helper/simulate_counterfactual.r"))
source(paste0(dir, "/code/helper/pi_norm_torch.R"))
source(paste0(dir, "/code/helper/calculate_eq.R"))
# 5.2 Repeat Monte Carlo draws
for (p_mod in c(3)){
run_sim_cf(dir, win_os, nsims, p_mod, endyear, low_score_school, mean_school_scores,
phbao, asian, white,
yearfe, blockfe, outcome_fes,
alpha_j_math, alpha_0_X_math, alpha_m_X_math, alpha_0_math, alpha_m_math,
alpha_j_ela, alpha_0_X_ela, alpha_m_X_ela, alpha_0_ela, alpha_m_ela,
delta_j, delta_X, psi_D, c_X,  sd_eta,
sd_theta_1, sd_theta_2, sd_theta_3,
mu_theta_1, mu_theta_2, mu_theta_3,
p_type_1, p_type_2, p_type_3,
params, exog, use_torch_for_eq, use_mean_pi =use_mean_pi)
}
source(paste0(dir,"/code/helper/simulate_counterfactual.r"))
source(paste0(dir, "/code/helper/pi_norm_torch.R"))
source(paste0(dir, "/code/helper/calculate_eq.R"))
# 5.2 Repeat Monte Carlo draws
for (p_mod in c(3)){
run_sim_cf(dir, win_os, nsims, p_mod, endyear, low_score_school, mean_school_scores,
phbao, asian, white,
yearfe, blockfe, outcome_fes,
alpha_j_math, alpha_0_X_math, alpha_m_X_math, alpha_0_math, alpha_m_math,
alpha_j_ela, alpha_0_X_ela, alpha_m_X_ela, alpha_0_ela, alpha_m_ela,
delta_j, delta_X, psi_D, c_X,  sd_eta,
sd_theta_1, sd_theta_2, sd_theta_3,
mu_theta_1, mu_theta_2, mu_theta_3,
p_type_1, p_type_2, p_type_3,
params, exog, use_torch_for_eq, use_mean_pi =use_mean_pi)
}
source(paste0(dir,"/code/helper/simulate_counterfactual.r"))
source(paste0(dir, "/code/helper/pi_norm_torch.R"))
source(paste0(dir, "/code/helper/calculate_eq.R"))
# 5.2 Repeat Monte Carlo draws
for (p_mod in c(3)){
run_sim_cf(dir, win_os, nsims, p_mod, endyear, low_score_school, mean_school_scores,
phbao, asian, white,
yearfe, blockfe, outcome_fes,
alpha_j_math, alpha_0_X_math, alpha_m_X_math, alpha_0_math, alpha_m_math,
alpha_j_ela, alpha_0_X_ela, alpha_m_X_ela, alpha_0_ela, alpha_m_ela,
delta_j, delta_X, psi_D, c_X,  sd_eta,
sd_theta_1, sd_theta_2, sd_theta_3,
mu_theta_1, mu_theta_2, mu_theta_3,
p_type_1, p_type_2, p_type_3,
params, exog, use_torch_for_eq, use_mean_pi =use_mean_pi)
}
source(paste0(dir,"/code/helper/simulate_counterfactual.r"))
source(paste0(dir, "/code/helper/pi_norm_torch.R"))
source(paste0(dir, "/code/helper/calculate_eq.R"))
# 5.2 Repeat Monte Carlo draws
for (p_mod in c(3)){
run_sim_cf(dir, win_os, nsims, p_mod, endyear, low_score_school, mean_school_scores,
phbao, asian, white,
yearfe, blockfe, outcome_fes,
alpha_j_math, alpha_0_X_math, alpha_m_X_math, alpha_0_math, alpha_m_math,
alpha_j_ela, alpha_0_X_ela, alpha_m_X_ela, alpha_0_ela, alpha_m_ela,
delta_j, delta_X, psi_D, c_X,  sd_eta,
sd_theta_1, sd_theta_2, sd_theta_3,
mu_theta_1, mu_theta_2, mu_theta_3,
p_type_1, p_type_2, p_type_3,
params, exog, use_torch_for_eq, use_mean_pi =use_mean_pi)
}
0
source(paste0(dir,"/code/helper/simulate_counterfactual.r"))
source(paste0(dir, "/code/helper/pi_norm_torch.R"))
source(paste0(dir, "/code/helper/calculate_eq.R"))
# 5.2 Repeat Monte Carlo draws
for (p_mod in c(3)){
run_sim_cf(dir, win_os, nsims, p_mod, endyear, low_score_school, mean_school_scores,
phbao, asian, white,
yearfe, blockfe, outcome_fes,
alpha_j_math, alpha_0_X_math, alpha_m_X_math, alpha_0_math, alpha_m_math,
alpha_j_ela, alpha_0_X_ela, alpha_m_X_ela, alpha_0_ela, alpha_m_ela,
delta_j, delta_X, psi_D, c_X,  sd_eta,
sd_theta_1, sd_theta_2, sd_theta_3,
mu_theta_1, mu_theta_2, mu_theta_3,
p_type_1, p_type_2, p_type_3,
params, exog, use_torch_for_eq, use_mean_pi =use_mean_pi)
}
source(paste0(dir,"/code/helper/simulate_counterfactual.r"))
source(paste0(dir, "/code/helper/pi_norm_torch.R"))
source(paste0(dir, "/code/helper/calculate_eq.R"))
# 5.2 Repeat Monte Carlo draws
for (p_mod in c(3)){
run_sim_cf(dir, win_os, nsims, p_mod, endyear, low_score_school, mean_school_scores,
phbao, asian, white,
yearfe, blockfe, outcome_fes,
alpha_j_math, alpha_0_X_math, alpha_m_X_math, alpha_0_math, alpha_m_math,
alpha_j_ela, alpha_0_X_ela, alpha_m_X_ela, alpha_0_ela, alpha_m_ela,
delta_j, delta_X, psi_D, c_X,  sd_eta,
sd_theta_1, sd_theta_2, sd_theta_3,
mu_theta_1, mu_theta_2, mu_theta_3,
p_type_1, p_type_2, p_type_3,
params, exog, use_torch_for_eq, use_mean_pi =use_mean_pi)
}
source(paste0(dir,"/code/helper/simulate_counterfactual.r"))
source(paste0(dir, "/code/helper/pi_norm_torch.R"))
source(paste0(dir, "/code/helper/calculate_eq.R"))
# 5.2 Repeat Monte Carlo draws
for (p_mod in c(3)){
run_sim_cf(dir, win_os, nsims, p_mod, endyear, low_score_school, mean_school_scores,
phbao, asian, white,
yearfe, blockfe, outcome_fes,
alpha_j_math, alpha_0_X_math, alpha_m_X_math, alpha_0_math, alpha_m_math,
alpha_j_ela, alpha_0_X_ela, alpha_m_X_ela, alpha_0_ela, alpha_m_ela,
delta_j, delta_X, psi_D, c_X,  sd_eta,
sd_theta_1, sd_theta_2, sd_theta_3,
mu_theta_1, mu_theta_2, mu_theta_3,
p_type_1, p_type_2, p_type_3,
params, exog, use_torch_for_eq, use_mean_pi =use_mean_pi)
}
source(paste0(dir,"/code/helper/simulate_counterfactual.r"))
source(paste0(dir, "/code/helper/pi_norm_torch.R"))
source(paste0(dir, "/code/helper/calculate_eq.R"))
# 5.2 Repeat Monte Carlo draws
for (p_mod in c(3)){
run_sim_cf(dir, win_os, nsims, p_mod, endyear, low_score_school, mean_school_scores,
phbao, asian, white,
yearfe, blockfe, outcome_fes,
alpha_j_math, alpha_0_X_math, alpha_m_X_math, alpha_0_math, alpha_m_math,
alpha_j_ela, alpha_0_X_ela, alpha_m_X_ela, alpha_0_ela, alpha_m_ela,
delta_j, delta_X, psi_D, c_X,  sd_eta,
sd_theta_1, sd_theta_2, sd_theta_3,
mu_theta_1, mu_theta_2, mu_theta_3,
p_type_1, p_type_2, p_type_3,
params, exog, use_torch_for_eq, use_mean_pi =use_mean_pi)
}
source(paste0(dir,"/code/helper/simulate_counterfactual.r"))
source(paste0(dir, "/code/helper/pi_norm_torch.R"))
source(paste0(dir, "/code/helper/calculate_eq.R"))
# 5.2 Repeat Monte Carlo draws
for (p_mod in c(3)){
run_sim_cf(dir, win_os, nsims, p_mod, endyear, low_score_school, mean_school_scores,
phbao, asian, white,
yearfe, blockfe, outcome_fes,
alpha_j_math, alpha_0_X_math, alpha_m_X_math, alpha_0_math, alpha_m_math,
alpha_j_ela, alpha_0_X_ela, alpha_m_X_ela, alpha_0_ela, alpha_m_ela,
delta_j, delta_X, psi_D, c_X,  sd_eta,
sd_theta_1, sd_theta_2, sd_theta_3,
mu_theta_1, mu_theta_2, mu_theta_3,
p_type_1, p_type_2, p_type_3,
params, exog, use_torch_for_eq, use_mean_pi =use_mean_pi)
}
0
source(paste0(dir,"/code/helper/simulate_counterfactual.r"))
source(paste0(dir, "/code/helper/pi_norm_torch.R"))
source(paste0(dir, "/code/helper/calculate_eq.R"))
# 5.2 Repeat Monte Carlo draws
for (p_mod in c(3)){
run_sim_cf(dir, win_os, nsims, p_mod, endyear, low_score_school, mean_school_scores,
phbao, asian, white,
yearfe, blockfe, outcome_fes,
alpha_j_math, alpha_0_X_math, alpha_m_X_math, alpha_0_math, alpha_m_math,
alpha_j_ela, alpha_0_X_ela, alpha_m_X_ela, alpha_0_ela, alpha_m_ela,
delta_j, delta_X, psi_D, c_X,  sd_eta,
sd_theta_1, sd_theta_2, sd_theta_3,
mu_theta_1, mu_theta_2, mu_theta_3,
p_type_1, p_type_2, p_type_3,
params, exog, use_torch_for_eq, use_mean_pi =use_mean_pi)
}
source(paste0(dir,"/code/helper/simulate_counterfactual.r"))
source(paste0(dir, "/code/helper/pi_norm_torch.R"))
source(paste0(dir, "/code/helper/calculate_eq.R"))
# 5.2 Repeat Monte Carlo draws
for (p_mod in c(3)){
run_sim_cf(dir, win_os, nsims, p_mod, endyear, low_score_school, mean_school_scores,
phbao, asian, white,
yearfe, blockfe, outcome_fes,
alpha_j_math, alpha_0_X_math, alpha_m_X_math, alpha_0_math, alpha_m_math,
alpha_j_ela, alpha_0_X_ela, alpha_m_X_ela, alpha_0_ela, alpha_m_ela,
delta_j, delta_X, psi_D, c_X,  sd_eta,
sd_theta_1, sd_theta_2, sd_theta_3,
mu_theta_1, mu_theta_2, mu_theta_3,
p_type_1, p_type_2, p_type_3,
params, exog, use_torch_for_eq, use_mean_pi =use_mean_pi)
}
source(paste0(dir,"/code/helper/simulate_counterfactual.r"))
source(paste0(dir, "/code/helper/pi_norm_torch.R"))
source(paste0(dir, "/code/helper/calculate_eq.R"))
# 5.2 Repeat Monte Carlo draws
for (p_mod in c(3)){
run_sim_cf(dir, win_os, nsims, p_mod, endyear, low_score_school, mean_school_scores,
phbao, asian, white,
yearfe, blockfe, outcome_fes,
alpha_j_math, alpha_0_X_math, alpha_m_X_math, alpha_0_math, alpha_m_math,
alpha_j_ela, alpha_0_X_ela, alpha_m_X_ela, alpha_0_ela, alpha_m_ela,
delta_j, delta_X, psi_D, c_X,  sd_eta,
sd_theta_1, sd_theta_2, sd_theta_3,
mu_theta_1, mu_theta_2, mu_theta_3,
p_type_1, p_type_2, p_type_3,
params, exog, use_torch_for_eq, use_mean_pi =use_mean_pi)
}
source(paste0(dir,"/code/helper/simulate_counterfactual.r"))
source(paste0(dir, "/code/helper/pi_norm_torch.R"))
source(paste0(dir, "/code/helper/calculate_eq.R"))
# 5.2 Repeat Monte Carlo draws
for (p_mod in c(3)){
run_sim_cf(dir, win_os, nsims, p_mod, endyear, low_score_school, mean_school_scores,
phbao, asian, white,
yearfe, blockfe, outcome_fes,
alpha_j_math, alpha_0_X_math, alpha_m_X_math, alpha_0_math, alpha_m_math,
alpha_j_ela, alpha_0_X_ela, alpha_m_X_ela, alpha_0_ela, alpha_m_ela,
delta_j, delta_X, psi_D, c_X,  sd_eta,
sd_theta_1, sd_theta_2, sd_theta_3,
mu_theta_1, mu_theta_2, mu_theta_3,
p_type_1, p_type_2, p_type_3,
params, exog, use_torch_for_eq, use_mean_pi =use_mean_pi)
}
-
0
source(paste0(dir,"/code/helper/simulate_counterfactual.r"))
source(paste0(dir, "/code/helper/pi_norm_torch.R"))
source(paste0(dir, "/code/helper/calculate_eq.R"))
# 5.2 Repeat Monte Carlo draws
for (p_mod in c(3)){
run_sim_cf(dir, win_os, nsims, p_mod, endyear, low_score_school, mean_school_scores,
phbao, asian, white,
yearfe, blockfe, outcome_fes,
alpha_j_math, alpha_0_X_math, alpha_m_X_math, alpha_0_math, alpha_m_math,
alpha_j_ela, alpha_0_X_ela, alpha_m_X_ela, alpha_0_ela, alpha_m_ela,
delta_j, delta_X, psi_D, c_X,  sd_eta,
sd_theta_1, sd_theta_2, sd_theta_3,
mu_theta_1, mu_theta_2, mu_theta_3,
p_type_1, p_type_2, p_type_3,
params, exog, use_torch_for_eq, use_mean_pi =use_mean_pi)
}
source(paste0(dir,"/code/helper/simulate_counterfactual.r"))
source(paste0(dir, "/code/helper/pi_norm_torch.R"))
source(paste0(dir, "/code/helper/calculate_eq.R"))
# 5.2 Repeat Monte Carlo draws
for (p_mod in c(3)){
run_sim_cf(dir, win_os, nsims, p_mod, endyear, low_score_school, mean_school_scores,
phbao, asian, white,
yearfe, blockfe, outcome_fes,
alpha_j_math, alpha_0_X_math, alpha_m_X_math, alpha_0_math, alpha_m_math,
alpha_j_ela, alpha_0_X_ela, alpha_m_X_ela, alpha_0_ela, alpha_m_ela,
delta_j, delta_X, psi_D, c_X,  sd_eta,
sd_theta_1, sd_theta_2, sd_theta_3,
mu_theta_1, mu_theta_2, mu_theta_3,
p_type_1, p_type_2, p_type_3,
params, exog, use_torch_for_eq, use_mean_pi =use_mean_pi)
}
0
source(paste0(dir,"/code/helper/simulate_counterfactual.r"))
source(paste0(dir, "/code/helper/pi_norm_torch.R"))
source(paste0(dir, "/code/helper/calculate_eq.R"))
# 5.2 Repeat Monte Carlo draws
for (p_mod in c(3)){
run_sim_cf(dir, win_os, nsims, p_mod, endyear, low_score_school, mean_school_scores,
phbao, asian, white,
yearfe, blockfe, outcome_fes,
alpha_j_math, alpha_0_X_math, alpha_m_X_math, alpha_0_math, alpha_m_math,
alpha_j_ela, alpha_0_X_ela, alpha_m_X_ela, alpha_0_ela, alpha_m_ela,
delta_j, delta_X, psi_D, c_X,  sd_eta,
sd_theta_1, sd_theta_2, sd_theta_3,
mu_theta_1, mu_theta_2, mu_theta_3,
p_type_1, p_type_2, p_type_3,
params, exog, use_torch_for_eq, use_mean_pi =use_mean_pi)
}
source(paste0(dir,"/code/helper/simulate_counterfactual.r"))
source(paste0(dir, "/code/helper/pi_norm_torch.R"))
source(paste0(dir, "/code/helper/calculate_eq.R"))
# 5.2 Repeat Monte Carlo draws
for (p_mod in c(3)){
run_sim_cf(dir, win_os, nsims, p_mod, endyear, low_score_school, mean_school_scores,
phbao, asian, white,
yearfe, blockfe, outcome_fes,
alpha_j_math, alpha_0_X_math, alpha_m_X_math, alpha_0_math, alpha_m_math,
alpha_j_ela, alpha_0_X_ela, alpha_m_X_ela, alpha_0_ela, alpha_m_ela,
delta_j, delta_X, psi_D, c_X,  sd_eta,
sd_theta_1, sd_theta_2, sd_theta_3,
mu_theta_1, mu_theta_2, mu_theta_3,
p_type_1, p_type_2, p_type_3,
params, exog, use_torch_for_eq, use_mean_pi =use_mean_pi)
}
source(paste0(dir,"/code/helper/simulate_counterfactual.r"))
source(paste0(dir, "/code/helper/pi_norm_torch.R"))
source(paste0(dir, "/code/helper/calculate_eq.R"))
# 5.2 Repeat Monte Carlo draws
for (p_mod in c(3)){
run_sim_cf(dir, win_os, nsims, p_mod, endyear, low_score_school, mean_school_scores,
phbao, asian, white,
yearfe, blockfe, outcome_fes,
alpha_j_math, alpha_0_X_math, alpha_m_X_math, alpha_0_math, alpha_m_math,
alpha_j_ela, alpha_0_X_ela, alpha_m_X_ela, alpha_0_ela, alpha_m_ela,
delta_j, delta_X, psi_D, c_X,  sd_eta,
sd_theta_1, sd_theta_2, sd_theta_3,
mu_theta_1, mu_theta_2, mu_theta_3,
p_type_1, p_type_2, p_type_3,
params, exog, use_torch_for_eq, use_mean_pi =use_mean_pi)
}
source(paste0(dir,"/code/helper/simulate_counterfactual.r"))
source(paste0(dir, "/code/helper/pi_norm_torch.R"))
source(paste0(dir, "/code/helper/calculate_eq.R"))
# 5.2 Repeat Monte Carlo draws
for (p_mod in c(3)){
run_sim_cf(dir, win_os, nsims, p_mod, endyear, low_score_school, mean_school_scores,
phbao, asian, white,
yearfe, blockfe, outcome_fes,
alpha_j_math, alpha_0_X_math, alpha_m_X_math, alpha_0_math, alpha_m_math,
alpha_j_ela, alpha_0_X_ela, alpha_m_X_ela, alpha_0_ela, alpha_m_ela,
delta_j, delta_X, psi_D, c_X,  sd_eta,
sd_theta_1, sd_theta_2, sd_theta_3,
mu_theta_1, mu_theta_2, mu_theta_3,
p_type_1, p_type_2, p_type_3,
params, exog, use_torch_for_eq, use_mean_pi =use_mean_pi)
}
-
-
0
source(paste0(dir,"/code/helper/simulate_counterfactual.r"))
source(paste0(dir, "/code/helper/pi_norm_torch.R"))
source(paste0(dir, "/code/helper/calculate_eq.R"))
# 5.2 Repeat Monte Carlo draws
for (p_mod in c(3)){
run_sim_cf(dir, win_os, nsims, p_mod, endyear, low_score_school, mean_school_scores,
phbao, asian, white,
yearfe, blockfe, outcome_fes,
alpha_j_math, alpha_0_X_math, alpha_m_X_math, alpha_0_math, alpha_m_math,
alpha_j_ela, alpha_0_X_ela, alpha_m_X_ela, alpha_0_ela, alpha_m_ela,
delta_j, delta_X, psi_D, c_X,  sd_eta,
sd_theta_1, sd_theta_2, sd_theta_3,
mu_theta_1, mu_theta_2, mu_theta_3,
p_type_1, p_type_2, p_type_3,
params, exog, use_torch_for_eq, use_mean_pi =use_mean_pi)
}
source(paste0(dir,"/code/helper/simulate_counterfactual.r"))
source(paste0(dir, "/code/helper/pi_norm_torch.R"))
source(paste0(dir, "/code/helper/calculate_eq.R"))
# 5.2 Repeat Monte Carlo draws
for (p_mod in c(3)){
run_sim_cf(dir, win_os, nsims, p_mod, endyear, low_score_school, mean_school_scores,
phbao, asian, white,
yearfe, blockfe, outcome_fes,
alpha_j_math, alpha_0_X_math, alpha_m_X_math, alpha_0_math, alpha_m_math,
alpha_j_ela, alpha_0_X_ela, alpha_m_X_ela, alpha_0_ela, alpha_m_ela,
delta_j, delta_X, psi_D, c_X,  sd_eta,
sd_theta_1, sd_theta_2, sd_theta_3,
mu_theta_1, mu_theta_2, mu_theta_3,
p_type_1, p_type_2, p_type_3,
params, exog, use_torch_for_eq, use_mean_pi =use_mean_pi)
}
source(paste0(dir,"/code/helper/simulate_counterfactual.r"))
source(paste0(dir, "/code/helper/pi_norm_torch.R"))
source(paste0(dir, "/code/helper/calculate_eq.R"))
# 5.2 Repeat Monte Carlo draws
for (p_mod in c(3)){
run_sim_cf(dir, win_os, nsims, p_mod, endyear, low_score_school, mean_school_scores,
phbao, asian, white,
yearfe, blockfe, outcome_fes,
alpha_j_math, alpha_0_X_math, alpha_m_X_math, alpha_0_math, alpha_m_math,
alpha_j_ela, alpha_0_X_ela, alpha_m_X_ela, alpha_0_ela, alpha_m_ela,
delta_j, delta_X, psi_D, c_X,  sd_eta,
sd_theta_1, sd_theta_2, sd_theta_3,
mu_theta_1, mu_theta_2, mu_theta_3,
p_type_1, p_type_2, p_type_3,
params, exog, use_torch_for_eq, use_mean_pi =use_mean_pi)
}
source(paste0(dir,"/code/helper/simulate_counterfactual.r"))
source(paste0(dir, "/code/helper/pi_norm_torch.R"))
source(paste0(dir, "/code/helper/calculate_eq.R"))
# 5.2 Repeat Monte Carlo draws
for (p_mod in c(3)){
run_sim_cf(dir, win_os, nsims, p_mod, endyear, low_score_school, mean_school_scores,
phbao, asian, white,
yearfe, blockfe, outcome_fes,
alpha_j_math, alpha_0_X_math, alpha_m_X_math, alpha_0_math, alpha_m_math,
alpha_j_ela, alpha_0_X_ela, alpha_m_X_ela, alpha_0_ela, alpha_m_ela,
delta_j, delta_X, psi_D, c_X,  sd_eta,
sd_theta_1, sd_theta_2, sd_theta_3,
mu_theta_1, mu_theta_2, mu_theta_3,
p_type_1, p_type_2, p_type_3,
params, exog, use_torch_for_eq, use_mean_pi =use_mean_pi)
}
source(paste0(dir,"/code/helper/simulate_counterfactual.r"))
source(paste0(dir, "/code/helper/pi_norm_torch.R"))
source(paste0(dir, "/code/helper/calculate_eq.R"))
# 5.2 Repeat Monte Carlo draws
for (p_mod in c(3)){
run_sim_cf(dir, win_os, nsims, p_mod, endyear, low_score_school, mean_school_scores,
phbao, asian, white,
yearfe, blockfe, outcome_fes,
alpha_j_math, alpha_0_X_math, alpha_m_X_math, alpha_0_math, alpha_m_math,
alpha_j_ela, alpha_0_X_ela, alpha_m_X_ela, alpha_0_ela, alpha_m_ela,
delta_j, delta_X, psi_D, c_X,  sd_eta,
sd_theta_1, sd_theta_2, sd_theta_3,
mu_theta_1, mu_theta_2, mu_theta_3,
p_type_1, p_type_2, p_type_3,
params, exog, use_torch_for_eq, use_mean_pi =use_mean_pi)
}
source(paste0(dir,"/code/helper/simulate_counterfactual.r"))
source(paste0(dir, "/code/helper/pi_norm_torch.R"))
source(paste0(dir, "/code/helper/calculate_eq.R"))
# 5.2 Repeat Monte Carlo draws
for (p_mod in c(3)){
run_sim_cf(dir, win_os, nsims, p_mod, endyear, low_score_school, mean_school_scores,
phbao, asian, white,
yearfe, blockfe, outcome_fes,
alpha_j_math, alpha_0_X_math, alpha_m_X_math, alpha_0_math, alpha_m_math,
alpha_j_ela, alpha_0_X_ela, alpha_m_X_ela, alpha_0_ela, alpha_m_ela,
delta_j, delta_X, psi_D, c_X,  sd_eta,
sd_theta_1, sd_theta_2, sd_theta_3,
mu_theta_1, mu_theta_2, mu_theta_3,
p_type_1, p_type_2, p_type_3,
params, exog, use_torch_for_eq, use_mean_pi =use_mean_pi)
}
source(paste0(dir,"/code/helper/simulate_counterfactual.r"))
source(paste0(dir, "/code/helper/pi_norm_torch.R"))
source(paste0(dir, "/code/helper/calculate_eq.R"))
# 5.2 Repeat Monte Carlo draws
for (p_mod in c(3)){
run_sim_cf(dir, win_os, nsims, p_mod, endyear, low_score_school, mean_school_scores,
phbao, asian, white,
yearfe, blockfe, outcome_fes,
alpha_j_math, alpha_0_X_math, alpha_m_X_math, alpha_0_math, alpha_m_math,
alpha_j_ela, alpha_0_X_ela, alpha_m_X_ela, alpha_0_ela, alpha_m_ela,
delta_j, delta_X, psi_D, c_X,  sd_eta,
sd_theta_1, sd_theta_2, sd_theta_3,
mu_theta_1, mu_theta_2, mu_theta_3,
p_type_1, p_type_2, p_type_3,
params, exog, use_torch_for_eq, use_mean_pi =use_mean_pi)
}
